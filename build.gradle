/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.0.1/userguide/java_library_plugin.html
 */

buildscript {
	ext {
		springBootVersion = '2.1.3.RELEASE'	
	}
	
	repositories {
		mavenCentral()
	}

   dependencies {
   	    classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")	
   }
}


//plugin settings
plugins {
	id 'java-library'
	id 'war'	
	id 'org.springframework.boot' version '2.1.4.RELEASE'
}

//java version settings
java {
	sourceCompatibility = JavaVersion.VERSION_1_8
	targetCompatibility = JavaVersion.VERSION_1_8
}


//repository and library dependencies settings
repositories {
    mavenCentral()
}
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web:2.1.4.RELEASE'
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf:2.1.4.RELEASE'
    implementation 'org.springframework.boot:spring-boot-devtools:2.1.4.RELEASE'
    implementation 'org.springframework.boot:spring-boot-starter-actuator:2.1.4.RELEASE'
    testImplementation  'org.springframework.boot:spring-boot-starter-test:2.1.4.RELEASE'
}

//profile: local, dev, prod)
ext.profile = (!project.hasProperty('profile') || !profile) ? 'dev' : profile
//application version
ext.appVersion= (!project.hasProperty('appVersion') || !appVersion) ? '1.0' : appVersion

//apply profiles
sourceSets {
	main {
		resources {
			srcDirs "src/main/resources/profile/${profile}"
		}
	}
}

//bootWar task
bootWar {
  baseName = 'spring-boot-sample-web-ui'
  version = appVersion
}

//use systemProperties in bootRun task
bootRun {
	systemProperties = System.properties
}


